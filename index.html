<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>üèõÔ∏è Generador de Prompts DIAN - Contador 4.0</title>
    <meta name="description" content="Generador autom√°tico de 30 prompts especializados en DIAN para contadores colombianos">
    <style>
        /* ---------- Reset y b√°sicos ---------- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root{
            --bg-grad-1: #667eea;
            --bg-grad-2: #764ba2;
            --accent-blue: #2ea8ff;
            --success: #2ecc71;
            --muted: #6b7280;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-grad-1) 0%, var(--bg-grad-2) 100%);
            min-height: 100vh;
            padding: 20px;
            color: #243b55;
            -webkit-font-smoothing:antialiased;
        }
        .container { max-width: 1200px; margin: 0 auto; }

        /* ---------- Header ---------- */
        .header {
            background: #fff;
            padding: 36px 28px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 { font-size: clamp(1.4rem, 2.6vw, 2.6rem); color: #243b55; margin-bottom: 8px; }
        .header .subtitle { color: #7f8c8d; font-size: 1.02rem; }

        /* ---------- Upload / Secret Section (mismo lugar) ---------- */
        .upload-section {
            background: white;
            padding: 28px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
            text-align: center;
            margin-bottom: 24px;
        }

        .upload-zone {
            border: 3px dashed #3498db;
            border-radius: 15px;
            padding: 36px;
            cursor: default;
            background: #f8f9fa;
            transition: all .25s;
            max-width: 900px;
            margin: 0 auto;
        }
        .upload-zone.small { padding: 20px; }

        .upload-icon {
            width: 72px;
            height: 72px;
            margin: 0 auto 14px;
            color: #3498db;
        }

        /* input "secreto" sin placeholder visible */
        .secret-input {
            display: block;
            width: 70%;
            max-width: 520px;
            padding: 14px 16px;
            margin: 14px auto 8px;
            border-radius: 10px;
            border: 2px solid #e6eefc;
            background: #f7fbff;
            outline: none;
            font-size: 1rem;
            text-align: center;
            color: #243b55;
            transition: box-shadow .18s, transform .12s;
        }
        .secret-input:focus {
            border-color: var(--success);
            background: #eefaf4;
            box-shadow: 0 6px 20px rgba(46,204,113,0.08);
            transform: translateY(-1px);
        }

        .btn {
            padding: 12px 34px;
            border: none;
            border-radius: 10px;
            font-size: 1.03rem;
            font-weight: 700;
            cursor: pointer;
            transition: all .22s;
            margin: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg,var(--bg-grad-1) 0%, var(--bg-grad-2) 100%);
            color: #fff;
        }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 28px rgba(102,126,234,0.25); }

        .btn-success {
            background: linear-gradient(135deg,#2ecc71 0%, #27ae60 100%);
            color: #fff;
        }
        .btn-warning {
            background: linear-gradient(135deg,#f39c12 0%, #e67e22 100%);
            color: #fff;
        }

        /* ---------- Info Section con tarjetas ---------- */
        .info-section {
            background: white;
            padding: 28px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
            margin-bottom: 30px;
        }

        .info-top { text-align:center; margin-bottom: 18px; }
        .info-top h3 { font-size: clamp(1rem, 1.6vw, 1.25rem); color: #2b3b50; margin-bottom: 8px; line-height:1.4; }
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-top: 18px;
        }
        .card {
            background: #f0f6ff;
            padding: 18px;
            border-radius: 14px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.04);
        }
        .card h3 { color: #5b7ce6; margin-bottom: 10px; font-size: 1.05rem; }
        .card ul { list-style: none; color: #374151; line-height: 1.8; }

        /* ---------- Results section & filters ---------- */
        .results-section {
            display: none;
            margin-bottom: 20px;
        }
        .results-section.active { display: block; }

        .results-banner {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 14px;
            text-align: center;
            margin-bottom: 12px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.06);
        }
        .results-banner h2 { color: #2e7d32; font-size: 1.25rem; margin-bottom:6px; }

        .category-filters {
            background: white;
            padding: 14px;
            border-radius: 14px;
            margin-bottom: 12px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.06);
            text-align:center;
        }
        .filter-btn {
            display:inline-block;
            padding: 8px 18px;
            margin: 6px;
            border-radius: 28px;
            border: 2px solid var(--accent-blue);
            background: white;
            color: var(--accent-blue);
            font-weight: 700;
            cursor: pointer;
            transition: all .18s;
            font-size: 0.95rem;
        }
        .filter-btn.active { background: var(--accent-blue); color: white; box-shadow: 0 6px 20px rgba(46,168,255,0.14); }
        .filter-btn:hover { transform: translateY(-3px); }

        .actions-row {
            text-align:center;
            padding: 12px 0 6px 0;
            margin-bottom: 12px;
        }

        .prompts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
            gap: 16px;
        }
        .prompt-card {
            background: white;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.06);
            transition: transform .18s;
            display:flex;
            flex-direction:column;
            justify-content:space-between;
        }
        .prompt-card:hover { transform: translateY(-6px); }
        .prompt-category { display:inline-block; padding:6px 12px; border-radius:20px; font-weight:700; margin-bottom:12px; font-size:0.9rem; }
        .category-dian { background:#e3f2fd; color:#1976d2; }
        .category-vencimientos { background:#fff3e0; color:#f57c00; }
        .category-obligaciones { background:#f3e5f5; color:#7b1fa2; }

        .prompt-title { font-weight:800; margin-bottom:8px; color:#243b55; font-size:1rem; }
        .prompt-text { color:#4b5563; line-height:1.6; margin-bottom:10px; white-space:pre-wrap; }

        .copy-btn {
            width:100%;
            padding:10px;
            border-radius:8px;
            border:none;
            font-weight:800;
            background:#2b83f6;
            color:white;
            cursor:pointer;
        }
        .copy-btn.copied { background:var(--success); }

        /* Prompt action row: Run in ChatGPT / Claude / Gemini */
        .prompt-actions {
            display:flex;
            gap:8px;
            margin-top:10px;
            align-items:center;
        }
        .run-btn {
            flex:1;
            padding:8px 10px;
            border-radius:8px;
            border:none;
            color:white;
            font-weight:700;
            cursor:pointer;
            font-size:0.86rem;
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:8px;
            transition: transform .12s, opacity .12s;
        }
        .run-btn:hover { transform: translateY(-2px); opacity:0.95; }
        .run-btn.chatgpt { background: #10a37f; } /* verde ChatGPT */
        .run-btn.claude { background: #6b5b95; }  /* morado/oscuro Claude */
        .run-btn.gemini { background: #4285f4; }  /* azul Google */

        .run-icon {
            width:16px; height:16px; display:inline-block;
        }

        /* ---------- Footer ---------- */
        .footer {
            background: white;
            padding: 20px;
            border-radius: 14px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.06);
            margin-top: 30px;
            text-align:center;
        }
        .footer p { color:#6b7280; }

        /* ---------- Progress ---------- */
        .progress-container {
            width: 360px;
            max-width:92%;
            height: 8px;
            background: #e6eefc;
            border-radius: 6px;
            margin: 18px auto 0;
            overflow: hidden;
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg,var(--bg-grad-1),var(--bg-grad-2));
            transition: width .5s ease;
        }

        /* Toast */
        .toast {
            position: fixed;
            right: 18px;
            bottom: 18px;
            background: var(--success);
            color: white;
            padding: 12px 14px;
            border-radius: 8px;
            display: none;
            box-shadow: 0 8px 26px rgba(0,0,0,0.18);
            font-weight:700;
        }
        .toast.show { display:block; }

        /* Responsive: ajustes m√≥viles (compactar secci√≥n de acceso) */
        @media (max-width: 900px) {
            .header { padding: 24px 18px; }
            .upload-section { padding: 20px; }
            .info-section { padding: 20px; }
            .cards { gap: 14px; }
            .progress-container { width: 260px; }
        }

        @media (max-width: 520px) {
            .upload-zone {
                padding: 18px;
                border-radius: 12px;
                border-width: 2px;
            }
            .upload-zone.small { padding: 14px; }
            .upload-icon { width:56px; height:56px; margin-bottom:10px; }
            .header h1 { font-size:1.5rem; }
            .secret-input {
                width: 92%;
                padding: 10px 12px;
                margin: 10px auto 8px;
                border-radius: 10px;
                font-size: 0.98rem;
            }
            .btn { width: 82%; max-width: 260px; padding: 12px 18px; font-size: 0.98rem; }
            .card { padding: 14px; }
            .prompt-card { padding: 12px; }
            .prompts-grid { gap: 12px; grid-template-columns: 1fr; }
            .prompt-actions { flex-direction: row; gap:6px; }
            .run-btn { font-size: 0.86rem; padding: 8px; }
        }

        /* small visual class for shake effect (incorrect key) */
        @keyframes shakeX {
            0%{ transform: translateX(0); }
            20%{ transform: translateX(-6px); }
            40%{ transform: translateX(6px); }
            60%{ transform: translateX(-4px); }
            80%{ transform: translateX(4px); }
            100%{ transform: translateX(0); }
        }
        .shake { animation: shakeX .35s ease; }

    </style>
</head>
<body>
    <div class="container">

        <!-- HEADER -->
        <div class="header" id="header">
            <h1>Generador Autom√°tico de Prompts DIAN</h1>
        </div>

        <!-- UPLOAD SECTION | MISMO LUGAR: ahora campo secreto sin texto visible -->
        <div class="upload-section" id="uploadSection">
            <div class="upload-zone" id="uploadZone">
                <!-- icono decorativo -->
                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:72px;height:72px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>

                <!-- t√≠tulo/espacio similar al original (se mantiene la narrativa) -->
                <h2 style="margin-top:8px;color:#2b3b50;">Generador Autom√°tico de Prompts DIAN</h2>
                <p style="color:#7f8c8d;margin-top:8px;max-width:820px;margin-left:auto;margin-right:auto;">
                    (Acceso protegido ‚Äî ingresa la clave para desbloquear los prompts)
                </p>

                <!-- Campo secreto: NO mostrar la palabra clave, no placeholder -->
                <input id="secretInput" class="secret-input" type="text" aria-label="clave de acceso" autocomplete="off" />

                <!-- Bot√≥n que s√≥lo activa verificaci√≥n -->
                <div style="margin-top:12px;">
                    <button class="btn btn-primary" id="btnGenerate" onclick="verifySecret()">Generar Prompts</button>
                    <button class="btn btn-warning" onclick="resetSecretField()">Limpiar</button>
                </div>

                <!-- Mensaje de confirmaci√≥n o error (sutil) -->
                <div id="secretFeedback" style="margin-top:16px; min-height:22px;"></div>
            </div>
        </div>

        <!-- INFO SECTION (tarjetas y texto original) -->
        <div class="info-section" id="infoSection">
            <div class="info-top">
                <h3>Esta herramienta genera autom√°ticamente <strong>30 prompts especializados</strong> y pensados para contadores colombianos en temas de DIAN, vencimientos tributarios y obligaciones formales.</h3>
            </div>

            <div class="cards">
                <div class="card">
                    <h3>Vencimientos Tributarios</h3>
                    <ul>
                        <li>‚Ä¢ Calendarios tributarios</li>
                        <li>‚Ä¢ Fechas de renta</li>
                        <li>‚Ä¢ IVA bimestral</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Obligaciones Formales</h3>
                    <ul>
                        <li>‚Ä¢ RUT y facturaci√≥n</li>
                        <li>‚Ä¢ R√©gimen SIMPLE</li>
                        <li>‚Ä¢ Libros de contabilidad</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Procedimientos DIAN</h3>
                    <ul>
                        <li>‚Ä¢ Fiscalizaci√≥n</li>
                        <li>‚Ä¢ Devoluciones</li>
                        <li>‚Ä¢ Recursos legales</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Casos Pr√°cticos</h3>
                    <ul>
                        <li>‚Ä¢ Declaraciones</li>
                        <li>‚Ä¢ Herramientas digitales</li>
                        <li>‚Ä¢ Normativa 2024</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- RESULTS (inicialmente oculto) -->
        <div class="results-section" id="resultsSection">
            <div class="results-banner">
                <div style="font-size:40px;margin-bottom:6px;">‚úÖ</div>
                <h2>¬°Prompts Generados Exitosamente!</h2>
                <div style="color:#4b5563;margin-top:6px;">Total de prompts: 30 especializados</div>
            </div>

            <div class="category-filters" role="toolbar" aria-label="Filtros de categor√≠a">
                <button class="filter-btn active" data-category="all" onclick="filterCategory('all')" data-category-attr="all">üìö Todos</button>
                <button class="filter-btn" data-category="dian" onclick="filterCategory('dian')" data-category-attr="dian">üèõÔ∏è DIAN</button>
                <button class="filter-btn" data-category="vencimientos" onclick="filterCategory('vencimientos')" data-category-attr="vencimientos">üìÖ Vencimientos</button>
                <button class="filter-btn" data-category="obligaciones" onclick="filterCategory('obligaciones')" data-category-attr="obligaciones">‚úÖ Obligaciones</button>
            </div>

            <div class="actions-row">
                <button class="btn btn-primary" onclick="downloadTXT()">üíæ Descargar TXT</button>
                <button class="btn btn-primary" onclick="downloadJSON()">üìã Descargar JSON</button>
                <button class="btn btn-success" onclick="copyAllPrompts()">üìé Copiar Todos</button>
            </div>

            <div class="prompts-grid" id="promptsGrid" aria-live="polite"></div>
        </div>

        <!-- FOOTER -->
        <div class="footer" id="footer">
            <p><strong>Generador de Prompts DIAN</strong> es una herramienta desarrollada por <strong>Jairo Amaya - Full Stack Marketer</strong> como complemento del <strong>E-book Contador 4.0</strong></p>
            <p style="margin-top:6px;color:#94a3b8;">¬© 2025 Todos los derechos reservados</p>
        </div>

    </div>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite">‚úì Acci√≥n completada</div>

    <script>
        /****************************************************************
         * L√≥gica principal
         * - El campo secreto est√° en el mismo lugar que la carga de PDF
         * - No se muestra la palabra clave en ninguna parte visible
         * - La clave real est√° en la constante SECRET (case-insensitive)
         ****************************************************************/

        // ====== CONFIG ======
        const SECRET = "PROMPTS DIAN"; // <-- clave √∫nica (no visible). Debe introducirse exactamente (sin importar may√∫sculas)
        let currentCategory = 'all';

        // Elementos
        const secretInput = document.getElementById('secretInput');
        const secretFeedback = document.getElementById('secretFeedback');
        const resultsSection = document.getElementById('resultsSection');
        const promptsGrid = document.getElementById('promptsGrid');
        const uploadSection = document.getElementById('uploadSection');
        const toastEl = document.getElementById('toast');

        // Prevent showing the secret as placeholder or autocomplete
        secretInput.placeholder = '';
        secretInput.autocomplete = 'off';
        secretInput.spellcheck = false;

        // ====== Lista de 30 prompts (id√©ntica a la l√≥gica previa) ======
        const prompts = [
            // DIAN (1-10)
            { id: 1, category: 'dian', title: 'Consulta de estado tributario actualizado', prompt: 'Necesito verificar el estado tributario actual de una persona natural en la DIAN. ¬øPodr√≠as guiarme paso a paso sobre c√≥mo consultar el RUT actualizado, verificar las responsabilidades activas y confirmar que no existen sanciones o inhabilidades? Incluye los enlaces directos a las plataformas oficiales de la DIAN.' },
            { id: 2, category: 'dian', title: 'Actualizaci√≥n de informaci√≥n en el RUT', prompt: 'Un cliente persona natural necesita actualizar su RUT porque cambi√≥ de direcci√≥n y quiere agregar una nueva responsabilidad tributaria. ¬øCu√°l es el procedimiento completo para hacer esta actualizaci√≥n de forma virtual? Explica los documentos necesarios, los pasos en la plataforma de la DIAN y los plazos que debo considerar.' },
            { id: 3, category: 'dian', title: 'Inscripci√≥n en el RUT como persona natural', prompt: 'Tengo un cliente que va a iniciar actividades econ√≥micas por primera vez como persona natural. ¬øPodr√≠as explicarme el proceso completo de inscripci√≥n en el RUT de la DIAN? Incluye los requisitos previos, documentos necesarios, responsabilidades que debe declarar y c√≥mo obtener la firma electr√≥nica si la necesita.' },
            { id: 4, category: 'dian', title: 'Proceso de devoluciones y compensaciones', prompt: 'Mi cliente tiene saldos a favor en su declaraci√≥n de renta del a√±o anterior y quiere solicitar la devoluci√≥n o compensaci√≥n. ¬øCu√°l es el procedimiento detallado en la DIAN para solicitar devoluciones? Explica las diferencias entre devoluci√≥n autom√°tica, por compensaci√≥n y por solicitud, adem√°s de los tiempos de respuesta esperados.' },
            { id: 5, category: 'dian', title: 'Correcci√≥n de declaraciones tributarias', prompt: 'Necesito corregir una declaraci√≥n de renta de una persona natural que ya fue presentada hace 2 meses porque encontr√© errores en los ingresos declarados. ¬øCu√°l es el procedimiento correcto para presentar una correcci√≥n en la DIAN? Explica si genera sanci√≥n, c√≥mo calcularla y el proceso de presentaci√≥n de la declaraci√≥n corregida.' },
            { id: 6, category: 'dian', title: 'Consulta de obligaciones tributarias pendientes', prompt: 'Un cliente me pidi√≥ verificar si tiene obligaciones tributarias pendientes con la DIAN. ¬øC√≥mo puedo consultar de forma completa todas las declaraciones que deber√≠a haber presentado en los √∫ltimos 2 a√±os? Incluye c√≥mo identificar si hay sanciones asociadas y el procedimiento para ponerse al d√≠a.' },
            { id: 7, category: 'dian', title: 'Firma electr√≥nica y mecanismos de autenticaci√≥n', prompt: 'Mi cliente necesita obtener su firma electr√≥nica para presentar declaraciones tributarias de forma virtual. ¬øPodr√≠as explicar los diferentes mecanismos de firma que acepta la DIAN (firma electr√≥nica, mecanismo de firma, etc.), c√≥mo obtener cada uno y cu√°l recomiendas para una persona natural que presenta declaraciones regularmente?' },
            { id: 8, category: 'dian', title: 'Facturaci√≥n electr√≥nica para personas naturales', prompt: 'Un comerciante persona natural debe implementar la facturaci√≥n electr√≥nica obligatoria. ¬øCu√°l es el proceso completo de habilitaci√≥n como facturador electr√≥nico en la DIAN? Explica los requisitos t√©cnicos, la resoluci√≥n de facturaci√≥n, los proveedores autorizados y c√≥mo hacer la primera prueba de facturaci√≥n.' },
            { id: 9, category: 'dian', title: 'Certificados tributarios y paz y salvo', prompt: 'Necesito obtener certificados tributarios de la DIAN para un cliente que va a participar en una licitaci√≥n p√∫blica. ¬øQu√© certificados existen (certificado de RUT, certificado de paz y salvo, certificado de antecedentes), c√≥mo se solicitan de forma virtual y qu√© informaci√≥n contiene cada uno?' },
            { id: 10, category: 'dian', title: 'Procedimiento de cobro coactivo', prompt: 'Mi cliente recibi√≥ una notificaci√≥n de la DIAN sobre un proceso de cobro coactivo por una deuda tributaria. ¬øPodr√≠as explicar qu√© es el cobro coactivo, las etapas del proceso, los derechos del contribuyente, las opciones para resolver la situaci√≥n (facilidades de pago, acuerdo de pago) y los plazos para actuar antes de que se tomen medidas cautelares?' },

            // Vencimientos (11-20)
            { id: 11, category: 'vencimientos', title: 'Calendario de vencimientos del a√±o actual', prompt: 'Necesito el calendario completo de vencimientos tributarios para personas naturales en Colombia para el a√±o 2025. Por favor, organiza la informaci√≥n por tipo de declaraci√≥n (renta, IVA, retenci√≥n en la fuente) y por √∫ltimos d√≠gitos del NIT, incluyendo las fechas exactas y los conceptos que se deben declarar en cada per√≠odo.' },
            { id: 12, category: 'vencimientos', title: 'Declaraci√≥n de renta - plazos y fechas clave', prompt: 'Mi cliente es una persona natural obligada a declarar renta. ¬øCu√°les son las fechas espec√≠ficas de vencimiento para presentar la declaraci√≥n de renta seg√∫n los √∫ltimos d√≠gitos de su NIT? Incluye tambi√©n las fechas para pago de saldos a pagar en cuotas y explica las implicaciones de presentar la declaraci√≥n despu√©s de la fecha l√≠mite.' },
            { id: 13, category: 'vencimientos', title: 'Declaraci√≥n bimestral de IVA', prompt: 'Tengo un cliente responsable de IVA r√©gimen com√∫n que debe presentar declaraciones bimestrales. ¬øCu√°les son las fechas de vencimiento para cada per√≠odo bimestral de 2025 seg√∫n los √∫ltimos d√≠gitos del NIT? Explica tambi√©n qu√© sucede si presenta una declaraci√≥n despu√©s del vencimiento y c√≥mo calcular la sanci√≥n por extemporaneidad.' },
            { id: 14, category: 'vencimientos', title: 'Retenci√≥n en la fuente mensual', prompt: 'Una persona natural que es agente de retenci√≥n debe presentar declaraciones mensuales de retenci√≥n en la fuente. ¬øCu√°l es el calendario de vencimientos mensual para 2025 seg√∫n los √∫ltimos d√≠gitos del NIT? Incluye las fechas para presentaci√≥n y pago, y explica qu√© hacer si se presenta una declaraci√≥n con saldo a pagar fuera del plazo.' },
            { id: 15, category: 'vencimientos', title: 'Pago de anticipos de renta', prompt: 'Mi cliente debe pagar anticipos del impuesto de renta durante el a√±o. ¬øCu√°les son las fechas de vencimiento para el pago de la primera y segunda cuota de anticipos en 2025? Explica c√≥mo se calculan estos anticipos, si son obligatorios para todas las personas naturales y qu√© sucede si no se pagan a tiempo.' },
            { id: 16, category: 'vencimientos', title: 'Vencimientos para declaraci√≥n de activos en el exterior', prompt: 'Un cliente tiene activos en el exterior superiores a los topes establecidos. ¬øCu√°les son las fechas de vencimiento para presentar la declaraci√≥n de activos en el exterior en 2025? Explica los umbrales que determinan la obligaci√≥n de declarar, la informaci√≥n que debe reportarse y las sanciones por no presentaci√≥n o presentaci√≥n extempor√°nea.' },
            { id: 17, category: 'vencimientos', title: 'Informaci√≥n ex√≥gena tributaria', prompt: 'Una persona natural que cumple con los requisitos debe presentar informaci√≥n ex√≥gena tributaria a la DIAN. ¬øCu√°les son las fechas de vencimiento para la presentaci√≥n de informaci√≥n ex√≥gena en 2025 seg√∫n el √∫ltimo d√≠gito del NIT? Explica qu√© tipo de informaci√≥n debe reportarse y qui√©nes est√°n obligados a presentarla.' },
            { id: 18, category: 'vencimientos', title: 'Plazos para correcci√≥n de declaraciones', prompt: 'Mi cliente necesita corregir una declaraci√≥n de IVA del per√≠odo anterior porque encontr√≥ errores. ¬øExiste un plazo espec√≠fico para presentar declaraciones de correcci√≥n? Explica si hay diferencia en los plazos seg√∫n el tipo de error (aumenta o disminuye el impuesto a cargo) y c√≥mo afecta esto al c√°lculo de sanciones.' },
            { id: 19, category: 'vencimientos', title: 'Vencimientos para facilidades de pago', prompt: 'Un cliente tiene una deuda tributaria y quiere solicitar facilidades de pago. ¬øCu√°les son los plazos para solicitar un acuerdo de pago con la DIAN? Explica si existe un momento l√≠mite para solicitarlo antes de que inicie un proceso de cobro coactivo y cu√°les son las condiciones generales que aplican para estos acuerdos.' },
            { id: 20, category: 'vencimientos', title: 'Control de m√∫ltiples vencimientos simult√°neos', prompt: 'Tengo un cliente que es responsable de IVA, agente de retenci√≥n y debe presentar declaraci√≥n de renta. En el mes de octubre se juntan varios vencimientos. ¬øPodr√≠as crear un sistema o metodolog√≠a para controlar m√∫ltiples vencimientos tributarios simult√°neos? Incluye recomendaciones de herramientas, recordatorios y c√≥mo priorizar las obligaciones cuando hay limitaciones de flujo de caja.' },

            // Obligaciones (21-30)
            { id: 21, category: 'obligaciones', title: 'Determinaci√≥n de obligaci√≥n de declarar renta', prompt: 'Tengo un cliente persona natural que no est√° seguro si est√° obligado a declarar renta este a√±o. ¬øPodr√≠as explicar detalladamente todos los requisitos que determinan la obligaci√≥n de presentar declaraci√≥n de renta para personas naturales? Incluye los topes de ingresos, patrimonio, consumos con tarjetas de cr√©dito, y otros factores relevantes para el a√±o gravable 2024.' },
            { id: 22, category: 'obligaciones', title: 'Responsabilidades del r√©gimen simple', prompt: 'Mi cliente es una persona natural que est√° considerando inscribirse en el R√©gimen Simple de Tributaci√≥n. ¬øPodr√≠as explicar todas las obligaciones tributarias formales y sustanciales de este r√©gimen? Incluye las declaraciones que debe presentar, la forma de pago del impuesto, las ventajas frente al r√©gimen ordinario y las limitaciones o restricciones que aplican.' },
            { id: 23, category: 'obligaciones', title: 'Obligaciones como agente de retenci√≥n', prompt: 'Una persona natural va a contratar empleados y realizar pagos a proveedores, lo que la convierte en agente de retenci√≥n. ¬øCu√°les son todas las obligaciones formales y sustanciales que adquiere como agente retenedor? Explica qu√© retenciones debe practicar, c√≥mo calcularlas, los plazos de declaraci√≥n y pago, y las sanciones por incumplimiento.' },
            { id: 24, category: 'obligaciones', title: 'Obligaciones de facturaci√≥n electr√≥nica', prompt: 'Mi cliente est√° obligado a implementar facturaci√≥n electr√≥nica. ¬øCu√°les son todas las obligaciones legales y t√©cnicas que implica ser facturador electr√≥nico? Incluye los requisitos de expedici√≥n, numeraci√≥n, contenido de las facturas, plazos de entrega, obligaciones de archivo y conservaci√≥n, y las sanciones por incumplimiento.' },
            { id: 25, category: 'obligaciones', title: 'Obligaciones contables para personas naturales', prompt: 'Una persona natural comerciante debe llevar contabilidad seg√∫n la ley. ¬øPodr√≠as explicar las obligaciones contables espec√≠ficas para personas naturales? Incluye qui√©nes est√°n obligados a llevar contabilidad formal, qu√© libros deben llevar, los requisitos de conservaci√≥n de documentos, y c√≥mo determinar si aplica el grupo 2 o 3 de NIIF.' },
            { id: 26, category: 'obligaciones', title: 'Obligaciones por contratos con el Estado', prompt: 'Mi cliente persona natural va a celebrar un contrato con una entidad p√∫blica. ¬øCu√°les son las obligaciones tributarias espec√≠ficas que debe cumplir por ser contratista del Estado? Explica los certificados que debe obtener, las retenciones especiales que le aplicar√°n, las declaraciones que debe presentar y cualquier otra obligaci√≥n formal adicional.' },
            { id: 27, category: 'obligaciones', title: 'Obligaciones tributarias de profesionales independientes', prompt: 'Un profesional independiente (m√©dico, abogado, arquitecto) quiere formalizar su actividad econ√≥mica. ¬øCu√°les son todas las obligaciones tributarias que debe cumplir? Incluye la inscripci√≥n en el RUT, responsabilidades que debe declarar, declaraciones peri√≥dicas que debe presentar, obligaci√≥n de facturar, y recomendaciones espec√≠ficas para su tipo de actividad.' },
            { id: 28, category: 'obligaciones', title: 'Obligaciones por actividades de econom√≠a digital', prompt: 'Tengo un cliente que obtiene ingresos por actividades digitales (comercio electr√≥nico, servicios en l√≠nea, marketing digital). ¬øCu√°les son las obligaciones tributarias espec√≠ficas para este tipo de actividades en Colombia? Explica si debe inscribirse en el RUT, qu√© responsabilidades declarar, c√≥mo facturar servicios digitales y tratamientos especiales que apliquen.' },
            { id: 29, category: 'obligaciones', title: 'Obligaciones tributarias de arrendadores', prompt: 'Mi cliente es una persona natural que obtiene ingresos por arrendamiento de bienes inmuebles. ¬øCu√°les son todas las obligaciones tributarias formales y sustanciales para arrendadores? Incluye la obligaci√≥n de declarar renta, retenciones que deben soportar, si debe expedir facturas, c√≥mo se determina la renta l√≠quida por arrendamientos y deducciones permitidas.' },
            { id: 30, category: 'obligaciones', title: 'Obligaciones frente a superintendencias y entes de control', prompt: 'Adem√°s de las obligaciones con la DIAN, ¬øqu√© otras obligaciones formales tiene una persona natural frente a otras entidades de control como la Superintendencia de Sociedades, de Industria y Comercio, o entes locales? Explica qu√© tipo de reportes o inscripciones puede necesitar seg√∫n la actividad econ√≥mica, y c√≥mo coordinar el cumplimiento de obligaciones con diferentes entidades.' }
        ];

        // ====== Funciones de verificaci√≥n y flujo ======
        function verifySecret() {
            const input = (secretInput.value || "").trim().toUpperCase();
            if (!input) {
                // Si el campo est√° vac√≠o, mostramos un mensaje sutil (no revelar la clave)
                secretFeedback.innerHTML = '<span style="color:#e74c3c;font-weight:700;">‚úñ Clave requerida</span>';
                return;
            }

            // Verificaci√≥n case-insensitive con la clave interna SECRET
            if (input === SECRET.toUpperCase()) {
                // Limpiar feedback y comenzar el proceso
                secretFeedback.innerHTML = '';
                startProcessing();
            } else {
                // Clave incorrecta (mensaje sutil ‚Äî no revelar c√≥mo es)
                secretFeedback.innerHTML = '<span style="color:#e67e22;font-weight:700;">‚úñ Clave incorrecta</span>';
                // efecto leve
                secretInput.classList.add('shake');
                setTimeout(()=> secretInput.classList.remove('shake'), 350);
            }
        }

        function resetSecretField() {
            secretInput.value = '';
            secretFeedback.innerHTML = '';
        }

        function startProcessing() {
            // Reemplazamos la zona por la animaci√≥n de progreso (mantener el mismo contenedor)
            uploadSection.innerHTML = `
                <div class="upload-zone small" style="padding:20px;">
                    <div style="font-size:40px; margin-bottom:6px;">‚è≥</div>
                    <h3 style="color:#2c3e50;">Analizando E-book Contador 4.0</h3>
                    <p style="color:#6b7280; margin-top:6px;">Procesando contenido y generando prompts especializados...</p>
                    <div class="progress-container" style="margin-top:18px;">
                        <div id="progressBar" class="progress-bar"></div>
                    </div>
                </div>
            `;

            // Animaci√≥n de progreso con pasos
            const steps = [
                { progress: 18, delay: 500 },
                { progress: 42, delay: 1100 },
                { progress: 66, delay: 1700 },
                { progress: 88, delay: 2300 },
                { progress: 100, delay: 3000 }
            ];

            steps.forEach(s => {
                setTimeout(() => {
                    const pb = document.getElementById('progressBar');
                    if (pb) pb.style.width = s.progress + '%';
                }, s.delay);
            });

            // Cuando termine la "simulaci√≥n", mostramos resultados
            setTimeout(() => {
                // Restaurar un bloque final similar al visual original
                uploadSection.innerHTML = `
                    <div class="upload-zone small" style="padding:20px; background:#e8f5e9; border-radius:12px;">
                        <div style="font-size:48px; color:#2e7d32; margin-bottom:6px;">‚úîÔ∏è</div>
                        <h3 style="color:#2e7d32; margin-bottom:6px;">¬°Prompts Generados Exitosamente!</h3>
                        <p style="color:#374151;">Se han generado 30 prompts especializados a partir del E-book.</p>
                    </div>
                `;
                // Mostrar secci√≥n de resultados y renderizar prompts
                resultsSection.classList.add('active');
                renderPrompts(); // carga en pantalla
                showToast('‚úì 30 prompts generados');
                // hacer scroll a resultados (suave)
                setTimeout(()=> {
                    resultsSection.scrollIntoView({ behavior:'smooth', block:'start' });
                }, 300);
            }, 3400);
        }

        // ====== Renderizado y utilidades ======
        function getCategoryName(category) {
            const map = { dian: 'üèõÔ∏è DIAN', vencimientos: 'üìÖ Vencimientos', obligaciones: '‚úÖ Obligaciones' };
            return map[category] || category;
        }

        function renderPrompts() {
            // Render seg√∫n currentCategory
            promptsGrid.innerHTML = '';
            const filtered = currentCategory === 'all' ? prompts : prompts.filter(p => p.category === currentCategory);
            filtered.forEach(p => {
                const card = document.createElement('div');
                card.className = 'prompt-card';
                card.innerHTML = `
                    <div>
                        <span class="prompt-category ${p.category === 'dian' ? 'category-dian' : (p.category==='vencimientos' ? 'category-vencimientos':'category-obligaciones')}">
                            ${getCategoryName(p.category)}
                        </span>
                        <div class="prompt-title">${escapeHtml(p.title)}</div>
                        <div class="prompt-text">${escapeHtml(p.prompt)}</div>
                    </div>

                    <div style="margin-top:12px;">
                        <button class="copy-btn" onclick="copyPrompt(${p.id}, this)">üìã Copiar Prompt</button>

                        <div class="prompt-actions" aria-hidden="false">
                            <button class="run-btn chatgpt" title="Abrir en ChatGPT" onclick="openInChatGPT(${p.id})">
                                <svg class="run-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20l9-7-9-7-9 7 9 7z"></path></svg>
                                ChatGPT
                            </button>
                            <button class="run-btn claude" title="Abrir en Claude" onclick="openInClaude(${p.id})">
                                <svg class="run-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9" stroke-width="1.6"></circle></svg>
                                Claude
                            </button>
                            <button class="run-btn gemini" title="Abrir en Gemini" onclick="openInGemini(${p.id})">
                                <svg class="run-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="18" height="18" rx="3" stroke-width="1.6"></rect></svg>
                                Gemini
                            </button>
                        </div>
                    </div>
                `;
                promptsGrid.appendChild(card);
            });
        }

        function filterCategory(cat) {
            currentCategory = cat;
            // actualizar botones visualmente
            document.querySelectorAll('.filter-btn').forEach(btn=>{
                btn.classList.remove('active');
                // usar atributo dataset si existe
                if ((btn.getAttribute('data-category') || btn.getAttribute('data-category-attr')) === cat) {
                    btn.classList.add('active');
                }
            });
            renderPrompts();
        }

        function copyPrompt(id, buttonEl) {
            const p = prompts.find(x => x.id === id);
            if (!p) return;
            navigator.clipboard.writeText(p.prompt).then(()=>{
                const prevText = buttonEl.textContent;
                buttonEl.textContent = '‚úì Copiado';
                buttonEl.classList.add('copied');
                showToast('Prompt copiado al portapapeles');
                setTimeout(()=>{
                    buttonEl.textContent = 'üìã Copiar Prompt';
                    buttonEl.classList.remove('copied');
                }, 1600);
            });
        }

        function copyAllPrompts() {
            const filtered = currentCategory === 'all' ? prompts : prompts.filter(p => p.category === currentCategory);
            const text = filtered.map((p,i) => `PROMPT ${i+1}: ${p.title}\n${'-'.repeat(80)}\n${p.prompt}\n\n`).join('');
            navigator.clipboard.writeText(text).then(()=> showToast('‚úì Todos los prompts copiados'));
        }

        function downloadTXT() {
            const filtered = currentCategory === 'all' ? prompts : prompts.filter(p => p.category === currentCategory);
            const text = filtered.map((p,i) => `PROMPT ${i+1}: ${p.title}\n${'-'.repeat(80)}\nCategor√≠a: ${getCategoryName(p.category)}\n\n${p.prompt}\n\n`).join('\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `prompts-dian-${currentCategory}.txt`;
            a.click();
            showToast('‚úì Archivo TXT descargado');
        }

        function downloadJSON() {
            const filtered = currentCategory === 'all' ? prompts : prompts.filter(p => p.category === currentCategory);
            const blob = new Blob([JSON.stringify(filtered, null, 2)], { type: 'application/json' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `prompts-dian-${currentCategory}.json`;
            a.click();
            showToast('‚úì Archivo JSON descargado');
        }

        // ====== Open in external chatbots (Nueva pesta√±a) ======
        // Nota: las URLs usadas son las rutas p√∫blicas comunes para iniciar una consulta con el texto
        // Algunas plataformas podr√≠an requerir login o formatos distintos; aqu√≠ usamos el enfoque "q=" o "prompt=" por compatibilidad.
        function openInChatGPT(id) {
            const p = prompts.find(x => x.id === id);
            if (!p) return;
            const url = 'https://chat.openai.com/?q=' + encodeURIComponent(p.prompt);
            window.open(url, '_blank', 'noopener');
        }
        function openInClaude(id) {
            const p = prompts.find(x => x.id === id);
            if (!p) return;
            const url = 'https://claude.ai/new?prompt=' + encodeURIComponent(p.prompt);
            window.open(url, '_blank', 'noopener');
        }
        function openInGemini(id) {
            const p = prompts.find(x => x.id === id);
            if (!p) return;
            const url = 'https://gemini.google.com/app?prompt=' + encodeURIComponent(p.prompt);
            window.open(url, '_blank', 'noopener');
        }

        // small helper to avoid XSS if alg√∫n prompt contuviera caracteres especiales
        function escapeHtml(str){
            return String(str).replace(/[&<>"'`=\/]/g, function(s) {
                return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;",'/':'&#x2F;','`':'&#x60;','=':'&#x3D;'})[s];
            });
        }

        // ====== Toast ======
        function showToast(msg, duration = 2800){
            toastEl.textContent = msg;
            toastEl.classList.add('show');
            setTimeout(()=> toastEl.classList.remove('show'), duration);
        }

        // ====== Accessibility / keyboard: Enter en el input dispara la verificaci√≥n ======
        secretInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                verifySecret();
            }
        });

        // ====== Inicial: console message ======
        console.log('Generador Prompts DIAN (versi√≥n con run-buttons y mobile optimizado) iniciado.');

    </script>
</body>
</html>
